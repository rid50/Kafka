import { Component, OnInit } from '@angular/core';
import { WebSocketService } from './websocket.service';

@Component({
  selector: 'app-my-component',
  template: `<p>Status: {{ connectionStatus }}</p>`
})
export class MyComponent implements OnInit {
  connectionStatus: string = 'Connecting...';

  constructor(private webSocketService: WebSocketService) {}

  ngOnInit(): void {
    this.webSocketService.connect()
      .then(client => {
        this.connectionStatus = 'Connected';
        client.subscribe('/topic/greetings', message => { // Replace with your topic
          console.log('Received: ' + message.body);
        });
      })
      .catch(error => {
        this.connectionStatus = 'Error connecting';
      });
  }
}
